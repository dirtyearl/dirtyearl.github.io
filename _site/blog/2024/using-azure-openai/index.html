<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1" name="viewport">
        <link rel="stylesheet" href="/earlfolio/assets/css/main.css">

        <h1 class="post-headline">Earl Davis</h1>
        <h3 class="post-description">Economics, Data Science, Data Engineering, and Machine Learning</h3>

        <div class="links scroll">
        <a href="/earlfolio/">Home</a>
        <a href="/earlfolio/about/">About</a>
        <a href="/earlfolio/resume/">Resume</a>
        <a href="/earlfolio/blog/">Blog</a>
        <a href="/earlfolio/archive/">Archive</a>
        <!-- <a href="/earlfolio/projects/">Projects</a> -->
</div>


        <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Generating Unit Tests Using OpenAI and Git Diff | Earl Davis</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Generating Unit Tests Using OpenAI and Git Diff" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Process of Generating a Test Based on the Git Output and the Insertion of the Context" />
<meta property="og:description" content="The Process of Generating a Test Based on the Git Output and the Insertion of the Context" />
<link rel="canonical" href="http://localhost:4000/earlfolio/blog/2024/using-azure-openai/" />
<meta property="og:url" content="http://localhost:4000/earlfolio/blog/2024/using-azure-openai/" />
<meta property="og:site_name" content="Earl Davis" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-02-14T09:55:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Generating Unit Tests Using OpenAI and Git Diff" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-14T09:55:00-06:00","datePublished":"2024-02-14T09:55:00-06:00","description":"The Process of Generating a Test Based on the Git Output and the Insertion of the Context","headline":"Generating Unit Tests Using OpenAI and Git Diff","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/earlfolio/blog/2024/using-azure-openai/"},"url":"http://localhost:4000/earlfolio/blog/2024/using-azure-openai/"}</script>
<!-- End Jekyll SEO tag -->


        <!-- Generated using https://favicon.io/ -->
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png?">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png?">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png?">
<link rel="manifest" href=site.webmanifest">


        <!-- MathJax -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ],
     processEscapes: true
    }
  });
</script>


        <!-- Load fontawesome here for faster loadtimes: https://stackoverflow.com/a/35880730/9523246 -->
        <script type="text/javascript"> (function() { var css = document.createElement('link'); css.href = 'https://use.fontawesome.com/releases/v5.11.0/css/all.css'; css.rel = 'stylesheet'; css.type = 'text/css'; document.getElementsByTagName('head')[0].appendChild(css); })(); </script>
    </head>

    <body>
        <main>
            <article>
                <h1 class="post-headline">Generating Unit Tests Using OpenAI and Git Diff</h1>
<p class="meta"><small>February 14, 2024</small></p>

<p>Import the necessary packages and modules. Azure OpenAI and Langchain are used to create a connection to an endpoint. The environment variables are stored locally using the <code class="language-plaintext highlighter-rouge">dotenv</code> package. The API key could and probably should be stored in Azure Key Vault.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">os</span><span class="p">,</span> <span class="n">subprocess</span><span class="p">,</span> <span class="n">re</span><span class="p">,</span> <span class="n">hashlib</span><span class="p">,</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="n">langchain_openai</span> <span class="kn">import</span> <span class="n">AzureOpenAI</span>
<span class="kn">from</span> <span class="n">dotenv</span> <span class="kn">import</span> <span class="n">dotenv_values</span>

<span class="n">os</span><span class="p">.</span><span class="nf">getcwd</span><span class="p">()</span>
<span class="n">root</span> <span class="o">=</span> <span class="sh">'</span><span class="s">/path/to/a/directory/gh-diff</span><span class="sh">'</span>
<span class="n">config</span> <span class="o">=</span> <span class="nf">dotenv_values</span><span class="p">(</span><span class="sh">'</span><span class="s">.env</span><span class="sh">'</span><span class="p">)</span>
<span class="c1"># {key:val for key, val in config.items()}
</span></code></pre></div></div>

<p>A connection the the OpenAI deployment endpoint is initialized. The necessary values are passed in.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">llm</span> <span class="o">=</span> <span class="nc">AzureOpenAI</span><span class="p">(</span>
    <span class="n">deployment_name</span><span class="o">=</span><span class="sh">"</span><span class="s">gh-diff</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">model_name</span><span class="o">=</span><span class="sh">"</span><span class="s">gpt-3.5-turbo</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="sh">'</span><span class="s">KEY</span><span class="sh">'</span><span class="p">],</span>
    <span class="n">azure_endpoint</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="sh">'</span><span class="s">ENDPOINT</span><span class="sh">'</span><span class="p">],</span>
    <span class="n">api_version</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="sh">'</span><span class="s">API_VERSION</span><span class="sh">'</span><span class="p">],</span> 
    <span class="c1"># temperature=2
</span><span class="p">)</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">master</code> and <code class="language-plaintext highlighter-rouge">feature/development</code> code branches are compared using the <code class="language-plaintext highlighter-rouge">git diff</code> command. The output of the command is passed to the python variable <code class="language-plaintext highlighter-rouge">out</code>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">master</span><span class="p">,</span> <span class="n">dev</span> <span class="o">=</span> <span class="p">(</span><span class="sh">'</span><span class="s">master</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">feature/development</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># !cd ../git-repo/ &amp;&amp; git diff branch/a..branch/b &gt; ../gh-diff/a-b-diff
</span><span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">cd ../git-repo/ &amp;&amp; git diff </span><span class="si">{</span><span class="n">master</span><span class="si">}</span><span class="s">..</span><span class="si">{</span><span class="n">dev</span><span class="si">}</span><span class="sh">"</span>
<span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="p">.</span><span class="nc">Popen</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="p">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">process</span><span class="p">.</span><span class="nf">communicate</span><span class="p">()</span>
</code></pre></div></div>

<p>The contents of the command output are split by line and the file names are captured. The git diff “chunks” are separated and the ones pertaining to binary files are removed. Two lists are initiallized. <code class="language-plaintext highlighter-rouge">plist</code> is used to collect a list of file names from where the change that the chunk represents came from. <code class="language-plaintext highlighter-rouge">clist</code> is a list of three-element tuples that contain the name of the file where the change occurred, the contents of that file, and the chunk that represents the change to that file.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">content</span> <span class="o">=</span> <span class="n">out</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">)</span>

<span class="n">lines</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
<span class="n">path_stem</span> <span class="o">=</span> <span class="sh">'</span><span class="s">/path/to/a/directory/git-repo</span><span class="sh">'</span>
<span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span> <span class="k">if</span> <span class="n">line</span><span class="p">.</span><span class="nf">startswith</span><span class="p">(</span><span class="sh">'</span><span class="s">+++</span><span class="sh">'</span><span class="p">)]</span>
<span class="n">file_names</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">([</span><span class="n">path_stem</span><span class="p">,</span> <span class="o">*</span><span class="n">line</span><span class="p">])</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">file_names</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>

<span class="n">chunks</span> <span class="o">=</span> <span class="n">content</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">diff --git</span><span class="sh">'</span><span class="p">)</span>
<span class="n">chunks</span> <span class="o">=</span> <span class="p">[</span><span class="n">chunk</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">if</span> <span class="n">chunk</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="sh">'</span><span class="s">Binary files</span><span class="sh">'</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">clist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">plist</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">chunk</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)[</span><span class="mi">3</span><span class="p">:]</span>
    <span class="n">file_path</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s"> b/</span><span class="sh">'</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">plist</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">path_stem</span><span class="p">,</span> <span class="n">file_path</span><span class="p">)</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
    <span class="n">chunk</span> <span class="o">=</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">clist</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">file_path</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">chunk</span><span class="p">))</span>
</code></pre></div></div>

<p>In order to pass the context of the change to the LLM model, we search the git repo for a reference to the file name collected above. The search string represents that file name being sought. Every file in the <code class="language-plaintext highlighter-rouge">src</code> path is read to search for the file name string, and when that string is found, the <code class="language-plaintext highlighter-rouge">src</code> filepath is saved to a dictionary using the source string as the key.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source_dict</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">()</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">plist</span><span class="p">:</span>
    <span class="n">search_string</span> <span class="o">=</span> <span class="n">path</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1"># Use os.walk to get all files in the directory and subdirectories
</span>    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="nf">walk</span><span class="p">(</span><span class="n">path_stem</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="c1"># Read the file
</span>                <span class="k">try</span><span class="p">:</span>
                    <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
                    <span class="c1"># If the search string is in the content, print the filename
</span>                    <span class="k">if</span> <span class="n">search_string</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                        <span class="n">source_dict</span><span class="p">.</span><span class="nf">update</span><span class="p">({</span><span class="n">search_string</span><span class="p">:</span><span class="n">file_path</span><span class="p">})</span>
                        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Found </span><span class="sh">'</span><span class="si">{</span><span class="n">search_string</span><span class="si">}</span><span class="sh">'</span><span class="s"> in </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
                <span class="k">except</span> <span class="nb">UnicodeDecodeError</span><span class="p">:</span>
                    <span class="c1"># Skip files that can't be decoded to text
</span>                    <span class="k">pass</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">clist</code> is processed to grab the shortened file path that is the key in the dictionary above, <code class="language-plaintext highlighter-rouge">file</code>. The <code class="language-plaintext highlighter-rouge">source</code> represents the full contents of the original file change. The <code class="language-plaintext highlighter-rouge">chunk</code> is the actual change. The <code class="language-plaintext highlighter-rouge">file</code> is processed to extract the key value, which is used to look up the contents of the file where the <code class="language-plaintext highlighter-rouge">source</code> is referenced. The contents of that file are trimmed of comments and truncated to 7000 tokens to guarantee that enough tokens are left over to deliver a non-trivial result. The results are written to a file titled <code class="language-plaintext highlighter-rouge">master-feature-diff-report-%Y%m%d%H%M%S.txt</code>. The last bit is the year, month, day, hour, minute, and second concatenated together for uniqueness.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="sh">"</span><span class="s">&lt;!--.*?--&gt;</span><span class="sh">"</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">diff_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%Y%m%d%H%M%S</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">hash_object</span> <span class="o">=</span> <span class="n">hashlib</span><span class="p">.</span><span class="nf">sha1</span><span class="p">(</span><span class="n">timestamp</span><span class="p">.</span><span class="nf">encode</span><span class="p">())</span>
    <span class="n">hash_hex</span> <span class="o">=</span> <span class="n">hash_object</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">()</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">'</span><span class="s">master-feature-diff-report-</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s">.txt</span><span class="sh">'</span>

    <span class="k">for</span> <span class="nb">file</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">clist</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="nb">file</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">source_dict</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">source_content</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>
                <span class="n">source_content</span> <span class="o">=</span> <span class="n">source_content</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
                <span class="n">source_content</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">source_content</span> <span class="k">if</span> <span class="n">line</span><span class="p">.</span><span class="nf">strip</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">line</span><span class="p">.</span><span class="nf">startswith</span><span class="p">(</span><span class="sh">'</span><span class="s">//</span><span class="sh">'</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">line</span><span class="p">.</span><span class="nf">strip</span><span class="p">().</span><span class="nf">startswith</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">\n</span><span class="sh">'</span><span class="p">)]</span>
                <span class="n">source_content</span> <span class="o">=</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">source_content</span><span class="p">)</span>
                <span class="n">source_content</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="sh">''</span><span class="p">,</span> <span class="n">source_content</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">re</span><span class="p">.</span><span class="n">DOTALL</span><span class="p">)[:</span><span class="mi">7000</span><span class="p">]</span>
                <span class="c1"># source_content = ' '.join(source_content)
</span>        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># print(e)
</span>            <span class="n">source_content</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">
        Create a unit test to test the change identified in the github diff chunk: </span><span class="si">{</span><span class="n">chunk</span><span class="si">}</span><span class="s">. 
        Write the test using Mulesoft</span><span class="sh">'</span><span class="s">s MUnit module. The changes are to the file </span><span class="si">{</span><span class="n">source</span><span class="si">}</span><span class="s">.
        The file contents are referenced in </span><span class="si">{</span><span class="n">source_content</span><span class="si">}</span><span class="s">. 
        </span><span class="sh">"""</span>
        <span class="k">if</span> <span class="n">source_content</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="nf">llm</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">max_tokens</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
                <span class="c1"># pass
</span>            <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># print(e)
</span>                <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">chunk</span> <span class="o">=</span> <span class="n">file_path</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="n">chunk</span>
            <span class="n">diff_list</span><span class="p">.</span><span class="nf">append</span><span class="p">((</span><span class="n">chunk</span><span class="p">,</span> <span class="n">result</span><span class="p">))</span>

    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">txt</span><span class="p">,</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">diff_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">res</span> <span class="ow">and</span> <span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">):</span> <span class="k">continue</span>
            <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">txt</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="mi">80</span> <span class="o">*</span> <span class="sh">'</span><span class="s">=</span><span class="sh">'</span><span class="si">}</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sh">"</span><span class="s">No result</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">f</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="se">\n</span><span class="si">{</span><span class="mi">80</span> <span class="o">*</span> <span class="sh">'</span><span class="s">=</span><span class="sh">'</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="mi">80</span> <span class="o">*</span> <span class="sh">'</span><span class="s">=</span><span class="sh">'</span><span class="si">}</span><span class="se">\n</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div>
<p>Overall the exercise when interesting, although the output was mostly garbage. Github is in the process of building this kind of thing anyway.</p>


<!-- Comments only for posts -->

    


            </article>
        </main>

        <footer>
          <p class="copy">
            <small> © Earl Davis 2024
                    | Powered by Jekyll and
                    <a target="_blank" href="https://github.com/jitinnair1/gradfolio/" rel="noopener noreferrer">Gradfolio</a>.
                    Last updated on 07 March 2024
            </small>
          </p>

        <div class="rounded-social-buttons">
<a title="" class="social-button linkedin" href="https://www.linkedin.com/in/earldavis" itemprop="sameAs" target="_blank" rel="noopener noreferrer">
<i class="fab fa-linkedin"></i>
</a><a title="" class="social-button github" href="https://www.github.com/dirtyearl" itemprop="sameAs" target="_blank" rel="noopener noreferrer">
<i class="fab fa-github"></i>
</a><a title="" class="social-button facebook" itemprop="sameAs" href="https://www.facebook.com/earl.davis.70301" target="_blank" rel="noopener noreferrer">
<i class="fab fa-facebook-f"></i>
</a>
</div>


        </footer>

        <!-- Google Analytics Tracking code -->
<script src="https://cdn.jsdelivr.net/npm/ga-lite@1/dist/ga-lite.min.js" async></script>
<script>
var galite = galite || {};
galite.UA = '';
</script>

    </body>

</html>
